{"version":3,"file":"years-view.js","sourceRoot":"","sources":["../../../../src/components/calendar/years-view/years-view.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, LitElement } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { themes } from '../../../theming/theming-decorator.js';\nimport { blazorIndirectRender } from '../../common/decorators/blazorIndirectRender.js';\nimport { blazorSuppressComponent } from '../../common/decorators/blazorSuppressComponent.js';\nimport { watch } from '../../common/decorators/watch.js';\nimport { Constructor } from '../../common/mixins/constructor.js';\nimport { EventEmitterMixin } from '../../common/mixins/event-emitter.js';\nimport { partNameMap } from '../../common/util.js';\nimport {\n  IgcCalendarBaseEventMap,\n  YEARS_PER_ROW,\n} from '../common/calendar-base.js';\nimport { calculateYearsRangeStart, setDateSafe } from '../common/utils.js';\nimport { styles as bootstrap } from '../themes/bootstrap/year-month-view.bootstrap.css.js';\nimport { styles as fluent } from '../themes/fluent/year-month-view.fluent.css.js';\nimport { styles } from '../themes/year-month-view.base.css.js';\n\n/**\n * Instantiate a years view as a separate component in the calendar.\n *\n * @element igc-years-view\n *\n * @csspart years-row - The years row container.\n * @csspart year - The year container.\n * @csspart year-inner - The inner year container.\n */\n@blazorIndirectRender\n@blazorSuppressComponent\n@themes({\n  bootstrap,\n  fluent,\n})\nexport default class IgcYearsViewComponent extends EventEmitterMixin<\n  IgcCalendarBaseEventMap,\n  Constructor<LitElement>\n>(LitElement) {\n  public static readonly tagName = 'igc-years-view';\n  public static styles = styles;\n\n  private years!: Date[][];\n\n  @query('[tabindex=\"0\"]')\n  private activeYear!: HTMLElement;\n\n  /** Ð¢he current value of the calendar. */\n  @property({ attribute: false })\n  public value = new Date();\n\n  /** Sets how many years are displayed on a single page. */\n  @property({ type: Number, attribute: 'years-per-page' })\n  public yearsPerPage = 15;\n\n  @watch('value')\n  @watch('yearsPerPage')\n  protected datesChange() {\n    this.years = this.generateYears();\n  }\n\n  constructor() {\n    super();\n    this.setAttribute('role', 'grid');\n  }\n\n  /** Focuses the active date. */\n  public focusActiveDate() {\n    this.activeYear.focus();\n  }\n\n  private formattedYear(value: Date) {\n    return `${value.getFullYear()}`;\n  }\n\n  private generateYears() {\n    const startYear = calculateYearsRangeStart(this.value, this.yearsPerPage);\n    const month = this.value.getMonth();\n    const result = [];\n\n    const rows = this.yearsPerPage / YEARS_PER_ROW;\n\n    for (let i = 0; i < rows; i++) {\n      const row: Date[] = [];\n      for (let j = 0; j < YEARS_PER_ROW; j++) {\n        const year = startYear + i * YEARS_PER_ROW + j;\n        const date = new Date(year, month, 1);\n        // fix year since values between 0 and 100 results in 1900s\n        date.setFullYear(year);\n        row.push(date);\n      }\n      result.push(row);\n    }\n\n    return result;\n  }\n\n  private resolveYearPartName(date: Date) {\n    const today = new Date();\n    return {\n      year: true,\n      selected: date.getFullYear() === this.value.getFullYear(),\n      current: date.getFullYear() === today.getFullYear(),\n    };\n  }\n\n  private selectYear(year: Date) {\n    const value = new Date(year);\n    setDateSafe(value, this.value.getDate());\n    this.value = value;\n    this.emitEvent('igcChange', { detail: this.value });\n  }\n\n  private yearKeyDown(event: KeyboardEvent, year: Date) {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      this.selectYear(year);\n    }\n  }\n\n  protected override render() {\n    return html`${this.years.map((row) => {\n      return html`<div part=\"years-row\" role=\"row\">\n        ${row.map((year) => {\n          const yearPartName = partNameMap(this.resolveYearPartName(year));\n          const yearInnerPartName = yearPartName.replace('year', 'year-inner');\n\n          return html`<span part=${yearPartName}>\n            <span\n              part=${yearInnerPartName}\n              role=\"gridcell\"\n              aria-selected=${year.getFullYear() === this.value.getFullYear()}\n              tabindex=\"${year.getFullYear() === this.value.getFullYear()\n                ? 0\n                : -1}\"\n              @click=${() => this.selectYear(year)}\n              @keydown=${(event: KeyboardEvent) =>\n                this.yearKeyDown(event, year)}\n            >\n              ${this.formattedYear(year)}\n            </span>\n          </span>`;\n        })}\n      </div>`;\n    })}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'igc-years-view': IgcYearsViewComponent;\n  }\n}\n"]}